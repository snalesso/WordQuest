<!-- <p>{{alphabetsSource.isLoading$ | ngrxPush | json}}</p> -->

<select id="alphabetVariantSelect"
        class="form-control"
        [disabled]="canSelectItems$ | ngrxPush | throwIfNil | negate"
        [ngModel]="selectedListItem$ | ngrxPush"
        (ngModelChange)="selectedListItem = $event">

    <ng-container *ngIf="{ 
        isLoading: isLoading$ | ngrxPush | throwIfNil,
        areListItemsLoaded: areListItemsLoaded$ | ngrxPush | throwIfNil
    } as conditions;">

        <option *ngIf="conditions.isLoading as isLoading; else isLoaded;"
                [ngValue]="undefined"
                disabled
                hidden>
            <span>Loading ... ({{isLoading}})</span>
        </option>

        <ng-template #isLoaded>
            <option *ngIf="!conditions.areListItemsLoaded; else alphabetVariants;"
                    [ngValue]="undefined"
                    disabled
                    hidden>
                <span>No alphabet variant available</span>
            </option>

            <ng-template #alphabetVariants>
                <option [ngValue]="undefined"
                        disabled
                        hidden>
                    <span>No alphabet variant selected</span>
                </option>
                <option [ngValue]="listItem.item"
                        *ngFor="let listItem of (listItems$ | ngrxPush | throwIfNil)">
                    <span>{{listItem.item.languageNativeName}}</span>
                    <span>&nbsp;</span>
                    <span>({{listItem.item.alphabetFamilyInvariantCultureName}})</span>
                </option>
            </ng-template>
        </ng-template>

    </ng-container>

</select>

<!-- <p>{{hasAvailableAlphabets$ | ngrxPush}}</p>
<p>{{availableAlphabets$ | ngrxPush | json}}</p> -->


<!-- version with alphabets calculated internally -->

<!-- <p>{{alphabetsSource.isLoading$ | ngrxPush | json}}</p>
<select class="form-control"
        [isDisabled]="canSelectAlphabet$ | ngrxPush"
        [ngModel]="selectedAlphabet$ | ngrxPush"
        (ngModelChange)="selectAlphabet($event)">

    <option [ngValue]="undefined"
            disabled
            hidden>

        <span *ngIf="(alphabetsSource.isLoading$ | ngrxPush); else isLoaded">Languages loading &hellip;</span>
        <ng-template #isLoaded>
            <span *ngIf="alphabetsSource.hasError$ | ngrxPush; else isSuccessful">Loading failed</span>
            <ng-template #isSuccessful>
                <ng-template [ngIf]="alphabetsSource.hasValue$ | ngrxPush | negate"
                             [ngIfElse]="hasValue">
                    <span>Languages not loaded</span>
                </ng-template>
                <ng-template #hasValue>
                    <span *ngIf="alphabetsSource.value$ | ngrxPush | isEmpty">No languages available &hellip;</span>
                    <span *ngIf="alphabetsSource.value$ | ngrxPush | isEmpty | negate">Select a language &hellip;</span>
                </ng-template>
            </ng-template>
        </ng-template>

    </option>

    <option [ngValue]="alphabet"
            *ngFor="let alphabet of (alphabetsSource.value$ | ngrxPush)">
        <span>{{alphabet.language.nativeName}}</span>
    </option>

</select> -->